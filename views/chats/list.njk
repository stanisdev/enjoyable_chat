{% extends 'layouts/base.njk' %}

{% block content %}

  <style>
    .unreadMessages {
      background-color: #FF6316; 
      border-radius: 5px; 
      color: #fff; 
      padding: 3px;
    }
    div.unread {
      float: right;
    }
  </style>

  <h1 id="tables">Chats</h1>
  <br>
  <div style="float: right; margin-top: -67px;">
    <a class="btn btn-primary" href="/chats/new/group" role="button">Create group chat</a>
  </div>
  <table class="table table-hover">
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Last message</th>
        <th style="width: 15%;" scope="col">Members count</th>
      </tr>
    </thead>
    <tbody>
      {% for chat in chats %}
        <tr>
          <td>
            <a href="/chats/{{ chat.id }}">{{ chat.name }}</a>
            
            {% if (chat.unreadCount) %}
              <div class="unread">
                <span class="unreadMessages">+{{ chat.unreadCount }}</span>
              </div>          
            {% endif %}

          </td>
          <td>{{ chat.lastMessage }}</td>
          <td>{{ chat.membersCount }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

{% endblock %}
